import { productPricesApi } from "@/app/lib/api/product-prices";import { productsApi } from "@/app/lib/api/products";import { priceListsApi } from "@/app/lib/api/price-lists";import { PriceList, Rubro } from "@/app/lib/types/types";export const getProductPriceForList = async (  productId: number,  priceListId?: number): Promise<number> => {  if (!priceListId) {    const product = await productsApi.getById(productId);    return product?.price || 0;  }  try {    const productPrice = await productPricesApi.getByProductAndPriceList(productId, priceListId);    if (productPrice) {      return productPrice.price;    }    const product = await productsApi.getById(productId);    if (product?.priceListId === priceListId) {      return product.price;    }    return product?.price || 0;  } catch (error) {    console.error("Error getting product price:", error);    return 0;  }};export const getDefaultPriceList = async (  rubro: Rubro): Promise<PriceList | null> => {  try {    const allLists = await priceListsApi.getAll();    const lists = allLists.filter((list: PriceList) => list.rubro === rubro);    const defaultList = lists.find((list: PriceList) => list.isDefault);    return defaultList || (lists.length > 0 ? lists[0] : null);  } catch (error) {    console.error("Error getting default price list:", error);    return null;  }};export const updateProductPriceForList = async (  productId: number,  priceListId: number,  price: number): Promise<void> => {  try {    try {        await productPricesApi.update(productId, priceListId, { price });    } catch {        await productPricesApi.create({            productId,            priceListId,            price        });    }    const product = await productsApi.getById(productId);    if (product?.priceListId === priceListId) {      await productsApi.update(productId, { price });    }  } catch (error) {    console.error("Error updating product price:", error);    throw error;  }};