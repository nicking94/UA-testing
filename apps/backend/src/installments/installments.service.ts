import { Injectable } from '@nestjs/common';import { PrismaService } from '../prisma/prisma.service';@Injectable()export class InstallmentsService {  constructor(private prisma: PrismaService) {}  async findAll(filters?: {    creditSaleId?: number;    status?: string;    customerId?: string;  }) {    const where: any = {};    if (filters?.creditSaleId) where.creditSaleId = filters.creditSaleId;    if (filters?.status) where.status = filters.status;    if (filters?.customerId) {      where.sale = { customerId: filters.customerId };    }    return this.prisma.installment.findMany({      where,      include: {        sale: {          include: {            customer: true,          },        },      },      orderBy: { dueDate: 'asc' },    });  }  async findOne(id: number) {    return this.prisma.installment.findUnique({      where: { id },      include: {        sale: {          include: {            customer: true,          },        },      },    });  }  async create(data: any) {    return this.prisma.installment.create({      data,      include: {        sale: true,      },    });  }  async createMany(data: any[]) {    return this.prisma.installment.createMany({      data,    });  }  async update(id: number, data: any) {    return this.prisma.installment.update({      where: { id },      data,      include: {        sale: true,      },    });  }  async delete(id: number) {    return this.prisma.installment.delete({ where: { id } });  }  async markAsPaid(    id: number,    paymentData: { paymentDate: Date; paymentMethod: string },  ) {    return this.prisma.installment.update({      where: { id },      data: {        status: 'pagada',        paymentDate: paymentData.paymentDate,        paymentMethod: paymentData.paymentMethod as any,      },    });  }}